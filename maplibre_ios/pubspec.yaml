name: maplibre_ios
description: "Helper package for maplibre that provides iOS FFI bindings"
version: 0.0.1
homepage: https://github.com/josxha/flutter-maplibre

environment:
  flutter: ^3.29.0
  sdk: ^3.7.0

dependencies:
  ffi: ^2.1.3
  flutter:
    sdk: flutter
  objective_c: ^8.0.0

dev_dependencies:
  ffigen: ^19.0.0
  very_good_analysis: ^9.0.0

flutter:
  plugin:
    platforms:
      ios:
        pluginClass: MapLibreIosPlugin

ffigen:
  name: MapLibreFFi
  description: Bindings for MapLibre iOS.
  language: objc
  output: 'lib/maplibre_ffi.dart'
  exclude-all-by-default: true
  objc-protocols:
    include:
      - 'MLN.*'
  objc-interfaces:
    include:
      - 'NSString'
      - 'MapLibreRegistry'
      - 'CLLocationCoordinate2D'
      - 'NSAttributedString'
      - 'NSImage'
      - 'NSExpression'
      - 'Helpers'
      - 'MLN.*'
    module:
      'MapLibreRegistry': 'maplibre_ios'
      'Helpers': 'maplibre_ios'
      'MLNMapView': 'MapLibre'
      'MLNMapCamera': 'MapLibre'
      'MLNVectorTileSource': 'MapLibre'
      'MLNOfflinePack': 'MapLibre'
      'MLNOfflineRegion': 'MapLibre'
    member-rename:
      'MLNSource':
        # https://github.com/dart-lang/native/issues/2419
        'initWithIdentifier:': 'initWithIdentifierOnly:'
  compiler-opts:
    - '-Fios/maplibre_ios/.build/artifacts/maplibre-gl-native-distribution/MapLibre/MapLibre.xcframework/ios-arm64/'
    - '-framework'
    - 'MapLibre'
    # - '-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk'
  headers:
    entry-points:
      - 'ios/maplibre_ios/Sources/maplibre_ios/MapLibreRegistry.h'
      - 'MapLibre.h'
  preamble: |
    // ignore_for_file: type=lint, unused_element, unused_field